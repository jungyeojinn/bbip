## 작업 예정
- 라이브 송출 본프로젝트 버전 테스트

## 작업 목록

### 라이브 송출 본프로젝트 버전 테스트
- 어제 웹소켓 통신 규약을 STOMP로 변경하면서 Handler → Controller로 변경되었었다.

왜? 기본 웹소켓 통신에서는 개발자가 직접 헤더에 접근할 수 없기 때문에 헤더에 인증 코드 등을 포함해서 사용자를 구분하기 위해 STOMP방식을 채택했다.

그래서 헤더에 원하는 엑세스토큰을 넣을 수 있게는 되었는데, 문제는 웹소켓 연결시 핸드쉐이크 과정을 거치는데 이때는 요청을 http 규약으로 진행한다는 것이다. 

- 따라서 STOMP헤더에 넣어둔 엑세스 코드에 핸드쉐이크 과정에서는 접근할수가 없다.

CONNECT과정에서 엑세스 토큰을 찾을 수 있어야 세션&엑세스 토큰을 사용해 각 세션에 해당하는 ffmpeg프로세스를 생성할 수 있다.

엑세스 토큰은 유저의 스트림키를 조회하는데에 사용되고, 세션은 해당하는 프로세스에 매핑되기 위해 필요하다. 

1. 지금까지 진행해본 상태로는 CONNECT 과정에서 STOMP헤더에 접근하지 못했는데, 혹시나 가능한지 확인해봐야하고. 안된다면
2. 웹소켓 CONNECT 요청은 아예 http로 헤더에 Authorization을 담아 완료하고, SEND요청은 따로 STOMP 규약으로 전송할 수 있는지 테스트 해봐야겠다.
    1. 웹소켓 CONNECT 요청은 아예 http로 헤더에 Authorization을 진행은 완료했다.


## 느낀 점
유튜브만 송출 지원해야 할 수도 있을 것 같다..

rtmp uri만 있으면 다 가능하고 적은 에너지로 구현할 수 있을거라고 생각했는데, 생각보다 다중 송출 테스트가 잘 안되고 있다. 가장 중요한 기능은 아니라서 웹소켓 쪽에 더 우선순위를 두고 진행해야겠다.