## 작업 예정
- 녹화된 원본 영상 임시저장 api 작성

## 작업 목록
### 녹화된 원본 영상 임시저장 api 1차 작성 완료
- 임시저장할 위치 선택 필요 - 일단 로컬 파일 시스템에 7일간 임시저장
  - 레디스에 key를 파일경로로 하여 만료시간 설정
  - 만료 이벤트 발생시 key 값에 저장된 파일경로에 접근하여 로컬파일 삭제
- 공간 확보를 위해 H.264로 압축하여 저장 (29MB -> 1MB 까지 줄여짐)

## 느낀 점
입력한 동영상이 정상적으로 인코딩되어 지정한 위치에 저장되었다가, 만료시간이 지나면 자동으로 삭제되는 것까지 확인했다.
다만, 현재는 원본 동영상이 11초로 약 30MB인데, 스트리밍시 기본 1시간이상 되는 녹화영상을 업로드했을 때 인코딩 시간이 꽤 오래 걸릴 수 있을 것 같아서 테스트 및 최적화가 필요할 것 같다.

라이브 송출이 아닌 multipart file을 인코딩해서 저장하는 로직이었는데, ffmpeg 명령어에 대한 이해가 부족해서 많이 헤맸다.
또 단순히 ffmpeg 명령어를 터미널에서 실행하면 정상실행되는데, java로 코드를 작성했을때 오류가 터지는 이유를 찾지 못했다.
해결은 되었지만 왜 된건지 모르는 상황이다.. 

비디오 파일을 InputStream으로 ffmpeg에 입력하는 과정에서 뭔가 문제가 있었던 것 같다.
수정한 코드에서는 InputStream을 사용하지 않고 ffmpeg 명령어에서 input 리소스를 경로지정해서 직접 읽어오기 때문에 문제가 발생하지 않았다.